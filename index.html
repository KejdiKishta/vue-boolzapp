<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoolzApp</title>

    <!-- font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">

    <!-- style -->
    <link rel="stylesheet" href="./css/style.css">

    <!-- media queries -->
    <link rel="stylesheet" href="./css/media-queries.css">

    <!-- vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

</head>
<body>
    <div class="container flex" id="app">
        <!-- !CONTACTS COL -->
        <nav>

            <!-- *HEADER -->
            <header class="flex s-between">
                <!-- ?img -->
                <div class="img-round">
                    <img src="./img/avatar_io.jpg" alt="">
                </div>
                <!-- ?icons -->
                <ul class="nav-header-icons flex c-g">
                    <li>
                        <button><i class="fa-solid fa-circle-notch"></i></button>
                    </li>
                    <li>
                        <button><i class="fa-solid fa-message"></i></button>
                    </li>
                    <li>
                        <button><i class="fa-solid fa-ellipsis-vertical"></i></button>
                    </li> 
                </ul>
            </header>
            <!-- /HEADER -->

            <!-- *NOTIFICATION SECTION -->
            <section class="notification flex">
                <div class="bell-icon flex">
                    <i class="fa-solid fa-bell-slash"></i>
                </div>
                <div class="notification-text flex">
                    <h3>Ricevi notifiche di nuovi messaggi</h3>
                    <a href="" class="c-g">Attiva notifiche desktop</a>
                </div>
            </section>
            <!-- /NOTIFICATION SECTION -->

            <!-- *RESEARCH SECTION -->
            <section class="research flex">
                <label for="new-chat" class="research-icon c-g flex">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </label>
                <div class="search-input">
                    <input id="new-chat" type="text" placeholder="Cerca o inizia una nuova chat" aria-label="search or start new chat" v-model="chatSearch" @keyup.enter="search">
                </div>
            </section>
            <!-- /RESEARCH SECTION -->

            <!-- *RECENT CHATS -->
            <section class="chats-history">
                <ul>
                    <!-- ?CARD -->
                    <li class="card flex" v-for="(contact, index) in contacts" @click="activeIndex = index" v-show="contact.visible">
                    <div class="card-img"><img :src="`./img/avatar${contact.avatar}.jpg`" :alt="contact.name"></div>
                    <div class="card-name ">
                        <h4>{{ contact.name }}</h4>
                        <p class="c-g">Lorem ipsum dolor sit amet</p>
                    </div>
                    <div class="card-time c-g">16:15</div>
                    </li>
                </ul>               
            </section>
            <!-- /RECENT CHATS -->

        </nav>
        <!-- /CONTACTS COL -->

        <!-- !CHAT COL -->
        <main>

            <!-- *CONTACT DETAILS -->
            <header class="flex" v-for="(contact, index) in contacts" v-show="index === activeIndex">
                <!-- ?info -->
                <div>
                    <img :src="`./img/avatar${contact.avatar}.jpg`" :alt="contact.name">
                </div>
                <div class="main-chat-name">
                    <h4>{{ contact.name }}</h4>
                    <p>Ultimo accesso oggi alle 16:26</p>
                </div>
                <!-- ?buttons -->
                <ul class="main-header-icons c-g flex">
                    <li>
                        <button><i class="fa-solid fa-magnifying-glass"></i></button>
                    </li>
                    <li>
                        <button><i class="fa-solid fa-paperclip"></i></button>
                    </li>
                    <li>
                        <button><i class="fa-solid fa-ellipsis-vertical"></i></button>
                    </li>
                </ul>
            </header>
            <!-- /CONTACT DETAILS -->

            <!-- *LAST MESSAGES -->
            <section v-for="(contact, index) in contacts" class="messages flex" v-show="index === activeIndex">
                <!-- ?message sent -->
                <div v-for="message in contact.messages" :class="message.status">
                    <div class="flex">
                        <p> {{ message.message }} </p>
                        <!-- ?chev dropdown -->
                        <div class="chev">
                            <label for="options">
                                <i class="fa-solid fa-chevron-down" id="options"></i>
                                <ul class="chev-list">
                                    <li>
                                        <button>Info messaggio</button>
                                    </li>
                                    <li>
                                        <button>Cancella messaggio</button>
                                    </li>
                                </ul>
                            </label>
                        </div>
                    </div>
                    <div class="message-time opacity05">
                        16.13
                    </div>
                </div>
            </section>
            <!-- /LAST MESSAGES -->

            <!-- *INPUT SECTION -->
            <section class="input-message">
                <form action="" class="flex" @submit.prevent>
                    <button class="emoji"><i class="fa-regular fa-face-smile"></i></button>
                    <input type="text" placeholder="Scrivi un messaggio" aria-label="write a message" v-model="newMessage.message" @keyup.enter="sendMessage">
                    <button class="vocal-note"><i class="fa-solid fa-microphone"></i></button>
                </form>
            </section>
            <!-- /INPUT SECTION -->

        </main>
        <!-- /CHAT COL -->

    </div>
    <!-- script -->
    <script src="./js/script.js"></script>
</body>
</html>